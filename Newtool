-- LocalScript to be placed inside StarterPlayerScripts or StarterCharacterScripts

-- Create the tool and add it to the player's backpack
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local backpack = player.Backpack

-- Create the tool
local tool = Instance.new("Tool")
tool.Name = "JumpSlamTool"
tool.RequiresHandle = true
tool.ToolTip = "Press to jump and slam with rocks!"

-- Create the handle for the tool
local handle = Instance.new("Part")
handle.Name = "Handle"
handle.Size = Vector3.new(1, 1, 1)
handle.Anchored = false
handle.CanCollide = false
handle.Transparency = 1 -- Make the handle invisible
handle.Parent = tool

-- Add the tool to the player's backpack
tool.Parent = backpack

-- Function to make the player jump and slam with rocks
local function jumpAndSlam()
    local humanoid = character:WaitForChild("Humanoid")
    local rootPart = character:WaitForChild("HumanoidRootPart")
    local camera = game.Workspace.CurrentCamera

    -- Make the player jump into the air (apply a force)
    humanoid:ChangeState(Enum.HumanoidStateType.Physics)
    humanoid:Move(Vector3.new(0, 50, 0))  -- Jumping force

    -- Create rocks falling down from above
    local rockCount = 10  -- Number of rocks to fall
    local rockSize = Vector3.new(3, 3, 3)
    
    -- Function to create a rock
    local function createRock()
        local rock = Instance.new("Part")
        rock.Size = rockSize
        rock.Shape = Enum.PartType.Ball
        rock.Anchored = false
        rock.CanCollide = true
        rock.Material = Enum.Material.SmoothPlastic
        rock.BrickColor = BrickColor.new("Dark stone grey")
        rock.Position = rootPart.Position + Vector3.new(math.random(-20, 20), 50, math.random(-20, 20))  -- Position above the player
        rock.Parent = game.Workspace
        
        -- Apply random falling speed
        local bodyVelocity = Instance.new("BodyVelocity")
        bodyVelocity.MaxForce = Vector3.new(10000, 10000, 10000)  -- Max force to make the rock fall fast
        bodyVelocity.Velocity = Vector3.new(0, -50, 0)  -- Falling speed downwards
        bodyVelocity.Parent = rock
        
        -- Destroy the rock after it hits the ground
        rock.Touched:Connect(function(hit)
            if hit and hit:IsGrounded() then  -- Check if the rock touches the ground
                rock:Destroy()  -- Destroy rock
            end
        end)
    end
    
    -- Create multiple rocks falling down
    for i = 1, rockCount do
        wait(math.random() * 0.1)  -- Random delay to make rocks fall at different times
        createRock()
    end

    -- After a short delay, move the player back to the ground
    wait(1)  -- Delay before slamming down
    humanoid:Move(Vector3.new(0, -50, 0))  -- Slam back down

    -- Optional: Add some camera shake to simulate impact
    local shakeTime = 0.5
    local shakeMagnitude = 0.5
    local initialPosition = camera.CFrame.Position

    for i = 1, shakeTime * 30 do
        camera.CFrame = CFrame.new(initialPosition + Vector3.new(math.random(-shakeMagnitude, shakeMagnitude), math.random(-shakeMagnitude, shakeMagnitude), math.random(-shakeMagnitude, shakeMagnitude)))
        wait(1/30)
    end

    -- Reset the camera position
    camera.CFrame = CFrame.new(initialPosition)
end

-- Connect the tool's activation to the jump and slam effect
tool.Activated:Connect(function()
    jumpAndSlam()
end)
